<!DOCTYPE html>
<html>
<head>
  <title>Offcanvas Example</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDf3xEq_6dGU0hLU0fUNhPfiPgpQ3r55so&libraries=places&callback=initMap" async defer></script>
  <style>
    /* Add custom styles to override Bootstrap's default styles */
    #search-box {
      position: relative; /* Position the search box relative to its parent */
      z-index: 9999; /* Make the search box appear above other elements */
    }
    #map {
      position: relative; /* Position the map relative to its parent */
      z-index: 1; /* Set the map's z-index lower than the search box */
    }
  </style>
</head>
<body>

  <button type="button" class="btn btn-primary" data-bs-toggle="offcanvas" data-bs-target="#offcanvasEditItem" aria-controls="offcanvasEditItem">
    Open Offcanvas
  </button>

  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasEditItem" aria-labelledby="offcanvasEditItemLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasEditItemLabel" class="offcanvas-title">Add User</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body mx-0 flex-grow-0 pt-0 h-100">
        <div class="mb-3">
            <label class="form-label" for="pin-location">Pin Location</label>
            <input type="text" id="search-box" class="form-control" placeholder="Search for a location">
            <div id="map" style="height: 300px;"></div>
            <input type="hidden" id="pin-latitude" name="pinLatitude">
            <input type="hidden" id="pin-longitude" name="pinLongitude">
          </div>

     

    </div>
  </div>

  <script>let map;
    let service;
    let infowindow;

    function initMap() {
      const center = { lat: -33.8688, lng: 151.2093 };

      map = new google.maps.Map(document.getElementById("map"), {
        center: center,
        zoom: 15,
      });

      const input = document.getElementById("search-box");
      const searchBox = new google.maps.places.SearchBox(input);

      map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

      map.addListener("bounds_changed", () => {
        searchBox.setBounds(map.getBounds());
      });

      searchBox.addListener("places_changed", () => {
        const places = searchBox.getPlaces();

        if (places.length === 0) {
          return;
        }

        const bounds = new google.maps.LatLngBounds();

        places.forEach((place) => {
          if (!place.geometry || !place.geometry.location) {
            console.log("Returned place contains no geometry");
            return;
          }

          bounds.extend(place.geometry.location);
        });

        map.fitBounds(bounds);
      });
    }

    initMap();
    </script>
</body>
</html>
